<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon class="menu-icon" name="menu"><ion-badge class="badge-count">{{countNotify}}</ion-badge></ion-icon>
    </button>
    
      <ion-row no-padding color="light">
        <ion-col class="filter" col-9>
          <ion-select [selectOptions]="filterOption" interface="popover" no-padding (ionChange)="doFilter()" [(ngModel)]="modelTicket.filterBy">
            <ion-option *ngFor="let item of arrayFilter"  [value]="item.value">{{item.name}} ({{countList[item.id]}})</ion-option>
          </ion-select>
        </ion-col>
        <ion-col col-3>
          <ion-icon float-right color="light" ios="ios-search" md="md-search" (click)="openModal()"></ion-icon>
          <ion-icon float-right class="padding-icon" color="light" ios="ios-funnel" md="md-funnel" (click)="openPopoverSort($event)"></ion-icon>
          <!-- <ion-icon float-right class="padding-icon" color="light" name="more" (click)="openPopoverChannel($event)"></ion-icon> -->
        </ion-col>
      </ion-row>
      
  </ion-navbar>
</ion-header>

<ion-content no-padding>
  <ion-spinner padding margin class="loading-search" *ngIf="modelTicket.dataLoading"  name="crescent"></ion-spinner>
  <ion-list no-padding class="list-ticket">
  <div *ngIf="modelTicket.dataItems.length>0">
  <ion-card *ngFor="let item of modelTicket.dataItems" (click)="clickTicket(item)">
    <ion-item >
      <ion-avatar item-start [ngStyle]="{'background-color':'#'+item.date}" class="box-avatar" *ngIf="item.request!==null">{{item.request | firstNlast}}
        <!-- <img src="../assets/imgs/user-icon.png"> -->
      </ion-avatar>
      <ion-avatar item-start class="box-avatar" *ngIf="item.request===null">
        ERR
      </ion-avatar>
      <h2 *ngIf="item.request!==null"><span style="font-size:1.2rem;color:#888888">#{{item.ticket_id}} - {{item.request}}</span></h2>
      <h2 *ngIf="item.request===null"><span style="font-size:1.2rem;color:#888888">#{{item.ticket_id}} - Chưa có người yêu cầu</span></h2>
      <p class="title-ticket" *ngIf="item.title!==''" >{{item.title}}</p>
      <p class="title-ticket" *ngIf="item.title===''" >Chưa có tiêu đề</p>
      <span item-end class="date-bagde-ticket">{{item.created_at| date: 'dd/MM'}}
        <span *ngFor=" let stt of status" >
          <ion-badge *ngIf="stt.value===item.status" item-end color="{{stt.value}}">{{stt.alias}}</ion-badge>
        </span>
      </span>
    </ion-item>
  </ion-card>
  </div>
  <ion-card *ngIf="modelTicket.dataItems.length<=0 && !modelTicket.dataLoading">
    <ion-item >
      <p>Không tìm thấy dữ liệu</p>
    </ion-item>
  </ion-card>
  </ion-list>
  <ion-infinite-scroll *ngIf="modelTicket.loadMore" (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>
  <!-- <button ion-button secondary menuToggle>Toggle Menu</button> -->
  <ion-refresher *ngIf="modelTicket.dataLoading==false" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
</ion-content>




